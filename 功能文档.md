# DTD(DrawTrainData) 功能文档

## 1. 项目概述
DTD(DrawTrainData)是一个用于创建手绘图像数据集的Web应用，允许用户通过简单的手绘方式生成用于AI训练的图像数据，并支持多种格式导出。

## 2. 核心功能

### 2.1 图像大小选择
- **下拉选择框**：提供默认图像尺寸选项
  - 16×16
  - 32×32
  - 64×64
  - 128×128
- **自定义输入**：支持用户手动输入宽度和高度
  - 宽度输入框
  - 高度输入框

### 2.2 画板功能
- **动态网格**：根据用户选择的图像大小(n×m)生成对应的网格画板
  - 网格单元格数量等于图像像素数(n×m)
  - 画板大小自适应用户窗口，保持弹性布局
  - 网格线清晰可见，便于绘制

### 2.3 绘制功能
- **鼠标绘制**：支持长按鼠标左键绘制
  - 鼠标按下并移动时，经过的单元格变为黑色
  - 绘制逻辑：单元格状态为二值化(黑/白)
  - 实时显示绘制效果

### 2.4 操作控制
- **保存按钮**：将当前绘制的图像暂存到图片夹
  - 点击后清空当前画板，准备绘制下一张
  - 自动生成图片缩略图显示在图片夹
- **重置按钮**：清空当前画板内容
  - 仅重置当前正在绘制的图像，不影响图片夹

### 2.5 图片夹管理
- **单图片夹限制**：默认只有一个图片夹(工作区)
  - 不支持创建多个图片夹
- **图片存储**：绘制完成的图片以二维数组格式暂存
  - 数组格式：[[像素1, 像素2, ...], [像素n+1, ...]]
  - 0表示白色，1表示黑色
- **图片预览**：显示已保存图片的缩略图
  - 支持缩略图浏览
  - 显示图片数量统计

### 2.6 图片大小更改限制
- **更改提示**：当图片夹有图片时更改大小
  - 弹出确认对话框
  - 提示："中途更改图片大小会清空图片夹，是否继续？"
- **操作结果**：
  - 确认：清空图片夹并应用新尺寸
  - 取消：保持当前尺寸不变

### 2.7 数据集导出
- **导出格式选择**：
  - BMP格式：将所有图片转换为.bmp文件
  - TXT格式：将每张图片的二维数组保存为.txt文件
- **压缩下载**：所有导出文件压缩为一个zip包
  - 自动生成唯一文件名
  - 浏览器直接下载

### 2.8 页面持久化
- **LocalStorage存储**：
  - 用户每添加一张图片，工作区内容自动保存到localStorage
  - 页面刷新或重新打开后自动恢复工作区状态
  - 保存内容包括：图片夹中的所有图片数据、当前选择的图像大小
- **数据清除**：
  - 仅当用户点击"重置图片夹"时删除localStorage数据
  - 重置当前绘制图像不影响localStorage

## 3. 用户界面设计
- **简洁易用**：界面设计以功能实现为核心
- **响应式布局**：适配不同屏幕尺寸
- **操作流程**：
  1. 选择/输入图像大小
  2. 在画板上绘制图案
  3. 保存到图片夹
  4. 重复1-3步生成多张图片
  5. 选择导出格式并下载数据集

## 4. 交互细节
- **绘制反馈**：鼠标按下和移动时实时显示绘制效果
- **状态提示**：显示当前操作状态和提示信息
- **错误处理**：输入无效尺寸时提供友好提示
- **操作确认**：关键操作(如清空图片夹)提供确认机制